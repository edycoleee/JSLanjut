<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css" />
    <title>PELAJARAN 7</title>
</head>

<body>
    <div class="grid-container">
        <div class="logo">
            <!-- nav header -->
            <div class="nav-header">
                <img src="./logo.svg" class="logo-nav" alt="logo1">
        </div>
    </div>
    <div class="menuAtas">
        <div class="nav-header">
            <a href="/" class="links">HOME</a>
        </div>
    </div>
        <div class="judul">
            <h3>fetch Gambar</h3>
        </div>
        <div class="isiHalaman">
            <section class="section-center">
                <p><b>Concepts and usage</b></p>
                <p>Fetch provides a generic definition of
                    <span class="rnthl rntclgreen"> Request </span>
                    and
                    <span class="rnthl rntclgreen"> Response </span>
                    objects (and other things
                    involved with network requests). This will allow
                    them to be used wherever they are needed in the
                    future, whether it’s for service workers,
                    Cache API, and other similar things that handle
                    or modify requests and responses, or any kind of
                    use case that might require you to generate your
                    own responses programmatically(that is, the use
                    of computer program or personal programming
                    instructions).</p>
                <p>
                    The Body mixin defines the following methods to extract a body
                    (implemented by both Request and Response). These all return a
                    promise that is eventually resolved with the actual content.
                    • arrayBuffer()• blob()• json()• text()• formData()
                </p>
                <p>fetch('http://example.com/movies.json')</p>
                <p> .then(response => response.json())</p>
                <p> .then(data => console.log(data))</p>
            </section>
        </div>
        <div class="footer">
            <a href="/">HOME</a> | <a href="">kosong</a>
        </div>
    </div>
    <div>
        <img src="" alt="coba" id="rainbow" width=400>
        <p id="poem" />
    </div>
    <script>
        console.log('coba ambil gambar dari file/API');
        // panggil fetch (---path/link--)---------------------------
        fetch('coba.jpg')
            //akan kembali response => text,blob,dll
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                console.log(response);
                return response.blob();
            })
            //tampilkan ke html
            .then(blob => {
                console.log(blob);
                document.getElementById('rainbow').src = URL.createObjectURL(blob)
            })
            // cek jika ada error
            .catch(error => {
                console.log('error!');
                console.error(error)
            })
        //----------------------------------------------------------
        console.log('about to fetch a txt');
        catchPoem()
            .then(poem => {
                document.getElementById('poem').innerText = poem;
                console.log('yay');
            })
            .catch(error => {
                console.log('error!');
                console.error(error);
            });
        //fetch txt file => text
        async function catchPoem() {
            const response = await fetch('poem.txt');
            return await response.text();
        }

        //---------------------------------------------------------
        // //C Fetch multiple image file => blob <
        //     console.log('about to fetch some rainbows');
        // //masukkan daftar file yg akan di ambil ke dalam array
        // const filenames = [
        //     'images/daniele-levis-pelusi-311027-unsplash.jpg',
        //     'images/guy-stevens-746794-unsplash.jpg',
        //     'images/sharon-pittaway-98257-unsplash.jpg'
        // ];
        // // panggil catch
        // catchRainbows(filenames)
        //     .then(response => {
        //         console.log('yay');
        //     })
        //     .catch(error => {
        //         console.log('error!');
        //         console.error(error);
        //     });

        // async function catchRainbows(filenames) {
        //     // render satu persatu file dengan perintah for
        //     for (let filename of filenames) {
        //         const response = await fetch(filename);
        //         const blob = await response.blob();
        //         const img = document.createElement('img');
        //         img.src = URL.createObjectURL(blob);
        //         img.width = '200';
        //         document.body.append(img);
        //     }
        // }
    </script>
</body>

</html>